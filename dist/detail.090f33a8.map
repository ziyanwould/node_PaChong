{"version":3,"sources":["views/movie/detail.js"],"names":["Meta","Card","site","gridStyle","width","textAlign","DPlayer","window","moment","locale","TabPane","Tabs","callback","key","console","log","style","cardContainer","margin","float","mT","marginTop","MovieDetail","props","_getMovieDetail","__LOADING__","method","url","state","_id","then","data","movie","video","videoKey","pic","coverKey","setState","relativeMovies","player","container","document","getElementById","screenshot","thumbnails","loading","match","params","id","title","rate","backgroundColor","tags","join","meta","createdAt","fromNow","summary","map","item","posterKey","rawTitle","pubdate","it","i","date","format","country","Component"],"mappings":"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","file":"detail.090f33a8.map","sourceRoot":"../src","sourcesContent":["import React, { Component } from 'react'\nimport { Tabs, Card, Badge, Radio, Button, message, List, Avatar } from 'antd'\nimport { request } from '../../lib'\nimport { Link } from 'react-router-dom'\nimport moment from 'moment'\nimport Layout from '../../layouts/default'\nconst { Meta } = Card\nimport 'moment/locale/zh-cn'\n\nconst site = 'https://yln212.top/'\nconst gridStyle = {\n  width: '25%',\n  textAlign: 'center',\n}\nconst DPlayer = window.DPlayer\n\nmoment.locale('zh-cn')\nconst TabPane = Tabs.TabPane\n\nfunction callback(key) {\n  console.log(key);\n}\n\n\nconst style = {\n  cardContainer: {\n    width: 500,\n    margin: 15,\n    float: 'left'\n  },\n  mT: {\n    marginTop: 12\n  }\n}\n\nexport default class MovieDetail extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      loading: false,\n      relativeMovies: [],\n      _id: this.props.match.params.id,\n      movie: null\n    }\n  }\n\n  componentDidMount () {\n    this._getMovieDetail()\n  }\n\n  _getMovieDetail = () => {\n    console.log(window.__LOADING__)\n    request({\n      method: 'get',\n      url: `/movies/detail/${this.state._id}`\n    })\n    .then(data => {\n      const movie = data.movie\n      const video = site + movie.videoKey\n      const pic = site + movie.coverKey\n\n      this.setState({\n        movie: data.movie,\n        relativeMovies: data.relativeMovies,\n      }, () => {\n        this.player = new DPlayer({\n          container: document.getElementById('videoPlayer'),\n          screenshot: true,\n          video: {\n            url: video,\n            pic: pic,\n            thumbnails: pic\n          }\n        })\n      })\n    })\n    // .catch(() => {\n    //   this.props.history.goBack()\n    // })\n  }\n\n  render () {\n    const { movie, relativeMovies } = this.state\n\n    console.log(relativeMovies)\n\n    if (!movie) return null\n\n    return (\n      <div className='flex-row full'>\n        <div className=\"page-shade\">\n          <div className=\"video-wrapper\">\n            <div id=\"videoPlayer\" src={site + movie.coverKey} data-video={site + movie.videoKey} />\n          </div>\n          <div className=\"video-sidebar\">\n            <Link className='homeLink' to={'/'}>回到首页</Link>\n            <Tabs defaultActiveKey=\"1\" onChange={callback}>\n              <TabPane tab=\"关于本片\" key=\"1\">\n                <h1>{movie.title}</h1>\n                <dl>\n                  <dt>豆瓣评分：<Badge count={movie.rate} style={{ backgroundColor: '#52c41a' }} /> 分</dt>\n                  <dt>电影分类：{movie.tags && movie.tags.join(' ')}</dt>\n                  <dt>更新时间：{moment(movie.meta.createdAt).fromNow()}</dt>\n                  <dt>影片介绍：</dt>\n                  <dd>{movie.summary}</dd>\n                </dl>\n              </TabPane>\n              <TabPane tab=\"同类电影\" key=\"2\">\n                {\n                  relativeMovies.map(item => (\n                    <a key={item._id} className=\"media\" href={`/detail/${item._id}`}>\n                      <img width=\"60\" className=\"align-self-center mr-3\" src={site + item.posterKey} alt={item.rawTitle} />\n                      <div className=\"media-body\">\n                        <h6 className=\"media-title\">{item.title}</h6>\n                        <ul className=\"list-unstyled\">\n                          {\n                            item.pubdate && item.pubdate.map((it, i) => (\n                              <li key={i}>{moment(it.date).format('YYYY.MM')} ({it.country})</li>\n                            ))\n                          }\n                        </ul>\n                      </div>\n                    </a>\n                  ))\n                }\n              </TabPane>\n            </Tabs>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n"]}